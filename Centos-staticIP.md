## Centos7 配置静态ip

虚拟机的目的是为了开发，装一堆集群应用，要求本机与虚拟机能互相访问，且虚拟机有`固定ip`，虚拟机能上外网（方便直接安装某些软件）。所以要使用`桥接方式`来配置虚拟机。


### 环境准备
`打开cmd输入 ipconfig 命令查看`

- 本机(物理机)ip：192.168.0.109
- 网关192.168.0.100
- 分配给虚拟机的ip：192.168.0.110，虚拟机和本机在同一网段。

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208104128648-2129164462.png)


### 步骤
#### 设置虚拟机静态ip 192.168.0.110

```
vi /etc/sysconfig/network-scripts/ifcfg-enp0s3
```

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208104439779-1735833505.png)

添加下面的内容
```
BOOTPROTO="static"---设置静态ip
ONBOOT="yes"---启动加载网络

#

IPADDR="192.168.0.110"
NETMASK="255.255.255.0"
GATEWAY="192.168.0.1"
DNS1=114.114.114.114
DNS2=223.5.5.5
DNS3=180.76.76.76
```
>设置DNS是为了防止外网ip能ping通但域名ping不通情况


####  修改网络设置
```
vi /etc/sysconfig/network
```

`修改网关为192.168.1.100，此处网关是本机（物理机）所在网关。`

```
NETWORKING=yes
HOSTNAME=centos2
GATEWAY=192.168.0.1
```

![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208104816804-746265439.png)


#### 设置完了重启网络服务
```
service network restart
```


![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208104940152-1342042608.png)


测试主机是否正常访问虚拟机
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208105054085-1309564527.png)


测试虚拟机是否访问主机及外网
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208105211674-914963204.png)


VirtualBox 虚拟机中网络的配置
![](https://img2018.cnblogs.com/blog/1231979/202002/1231979-20200208105426919-710289424.png)



### virtualbox 七种网络类型

#### 1：未指定

网卡存在，但没有连接。有助于通知客户操作系统没有可用的网络连接并强制执行重新配置。一般不用


#### 2：网络地址转换（NAT）

作为一台虚拟主机使用，能上网，无固定ip。虚拟机能ping通主机，主机不能Ping通虚拟机，虚拟机互相不能ping。


#### 3：NAT网络

VirtualBox 4.3之后引入的一种新的NAT格式。和上面类似。


#### 4：桥接网卡

主机和虚拟机之间可以互相ping通，虚拟机之间可以互相ping通，能上网。开发环境一般用这个（分别装应用，集群等，能互相通讯）。


#### 5：内部网络

虚拟机不能上网，虚拟机之间能互相ping通，虚拟机和主机间不能互相ping通。虚拟机单独成局域网，主机都不在网内。


#### 6：仅主机通讯

虚拟机不可以上网，虚拟机之间能互相ping通，虚拟机和主机间可以互相ping通。简单说就是虚拟机和主机组成局域网。


#### 7：通用驱动

很少使用的模式。允许用户选择驱动，共享相同的网络接口，包括UDP（UDP隧道），VUE（虚拟分布式以太网）方式。